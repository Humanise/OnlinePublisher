if(!op){var op={}}op.preview=false;op.page={id:null,path:null,template:null};op.ignite=function(){if(!this.preview){document.onkeydown=function(B){B=hui.event(B);if(B.returnKey&&B.shiftKey){B.stop();var A;A=function(C){C=hui.event(C);if(C.returnKey){hui.unListen(document,"keyup",A);if(!hui.browser.msie&&!op.user.internal){C.stop();op.showLogin()}else{window.location=(op.page.path+"Editor/index.php?page="+op.page.id)}}};hui.listen(document,"keyup",A)}return true};hui.request({url:op.context+"services/statistics/",parameters:{page:op.page.id,referrer:document.referrer,uri:document.location.href}})}if(hui.browser.msie7){hui.onReady(function(){hui.cls.add(document.body.parentNode,"msie7")})}};op.showLogin=function(){if(!this.loginBox){if(this.loadingLogin){hui.log("Aborting, the box is loading");return }this.loadingLogin=true;hui.ui.showMessage({text:{en:"Loading...",da:"Indlæser..."},busy:true,delay:300});hui.ui.require(["Formula","Button","TextField"],function(){hui.ui.hideMessage();var F=this.loginBox=hui.ui.Box.create({width:300,title:{en:"Access control",da:"Adgangskontrol"},modal:true,absolute:true,closable:true,curtainCloses:true,padding:10});this.loginBox.addToDocument();var E=this.loginForm=hui.ui.Formula.create();E.listen({$submit:function(){if(!F.isVisible()){return }var H=E.getValues();op.login(H.username,H.password)}});var D=E.buildGroup(null,[{type:"TextField",options:{label:{en:"Username",da:"Brugernavn"},key:"username"}},{type:"TextField",options:{label:{en:"Password",da:"Kodeord"},key:"password",secret:true}}]);var A=D.createButtons();var B=hui.ui.Button.create({text:{en:"Forgot password?",da:"Glemt kode?"}});B.listen({$click:function(){document.location=op.context+"Editor/Authentication.php?forgot=true"}});A.add(B);var C=hui.ui.Button.create({text:{en:"Cancel",da:"Annuller"}});C.listen({$click:function(){E.reset();F.hide();document.body.focus()}});A.add(C);A.add(hui.ui.Button.create({text:{en:"Log in",da:"Log ind"},highlighted:true,submit:true}));this.loginBox.add(E);this.loginBox.show();window.setTimeout(function(){E.focus()},100);this.loadingLogin=false;op.startListening();var G=new hui.Preloader({context:hui.ui.context+"hui/icons/"});G.addImages("common/success24.png");G.load()}.bind(this))}else{this.loginBox.show();this.loginForm.focus()}};op.startListening=function(){hui.listen(window,"keyup",function(B){B=hui.event(B);if(B.escapeKey&&this.loginBox.isVisible()){this.loginBox.hide();var A=hui.get.firstByTag(document.body,"a");if(A){A.focus();A.blur()}document.body.blur()}}.bind(this))};op.login=function(B,A){if(hui.isBlank(B)||hui.isBlank(A)){hui.ui.showMessage({text:{en:"Please fill in both fields",da:"Udfyld venligst begge felter"},duration:3000});this.loginForm.focus();return }hui.ui.request({message:{start:{en:"Logging in...",da:"Logger ind..."},delay:300},url:op.context+"Editor/Services/Core/Authentication.php",parameters:{username:B,password:A},onJSON:function(C){if(C.success){hui.ui.showMessage({text:{en:"You are now logged in",da:"Du er nu logget ind"},icon:"common/success",duration:4000});op.igniteEditor()}else{hui.ui.showMessage({text:{en:"The user was not found",da:"Brugeren blev ikke fundet"},icon:"common/warning",duration:4000})}},onFailure:function(){hui.ui.showMessage({text:{en:"An internal error occurred",da:"Der skete en fejl internt i systemet"},icon:"common/warning",duration:4000})}})};op.igniteEditor=function(){window.location=(op.page.path+"Editor/index.php?page="+op.page.id)};op.showImage=function(A){if(!this.imageViewer){this.imageViewer=hui.ui.ImageViewer.create({maxWidth:2000,maxHeight:2000,perimeter:40,sizeSnap:10});this.imageViewer.listen(op.imageViewerDelegate)}this.imageViewer.clearImages();this.imageViewer.addImage(A);this.imageViewer.show()};op.registerImageViewer=function(B,A){hui.get(B).onclick=function(){op.showImage(A);return false}};op.imageViewerDelegate={$resolveImageUrl:function(C,E,A){var B=C.width?Math.min(E,C.width):E;var D=C.height?Math.min(A,C.height):A;return op.page.path+"services/images/?id="+C.id+"&width="+B+"&height="+D+"&format=jpg&quality=100"}};op.showVideo=function(A){if(!this.videoViewer){this.videoViewer=new op.VideoViewer()}this.videoViewer.show(A)};op.VideoViewer=function(){this.box=hui.ui.Box.create(null,{absolute:true,modal:true});this.box.addToDocument();this.content=new Element("div").setStyle({width:"400px",height:"200px"});this.box.add(this.content);this.box.listen(this)};op.VideoViewer.prototype={show:function(A){this.content.setStyle({width:A.width+"px",height:A.height+"px"});this.content.insert(this.buildQuickTime(A));this.box.show()},buildFlash:function(){var A=new SWFObject("player.swf","ply","328","200","9","#FFFFFF");A.addParam("allowfullscreen","true");A.addParam("allowscriptaccess","always");A.addParam("flashvars","file=video.flv&image=preview.jpg");A.write("container")},buildQuickTime:function(A){var B=new Element("object",{width:A.width,height:A.height,type:"video/quicktime",data:A.file});return B},boxCurtainWasClicked:function(){this.box.hide();this.content.update()}};if(op.part===undefined){op.part={}}op.feedback=function(A){hui.require(op.page.path+"style/basic/js/Feedback.js",function(){op.feedback.Controller.init(A)})};op.part.ImageGallery=function(A){this.options=A;this.element=hui.get(A.element);this.images=[]};op.part.ImageGallery.prototype={registerImage:function(B,C){B=hui.get(B);if(this.options.editor){return }this.images.push(C);var A=this;B.onclick=function(D){hui.stop(D);A.showImage(C.id);return false}},showImage:function(A){if(!this.imageViewer){this.imageViewer=hui.ui.ImageViewer.create({maxWidth:2000,maxHeight:2000,perimeter:40,sizeSnap:10});this.imageViewer.listen(op.imageViewerDelegate)}this.imageViewer.clearImages();this.imageViewer.addImages(this.images);this.imageViewer.showById(A)},init:function(){if(this.options.variant=="changing"){op.part.ImageGallery.changing.init(this.element)}}};op.part.ImageGallery.changing={init:function(C){var A=C.getElementsByTagName("a");if(A.length==0){return }var F;var B=-1;var E=1;var D=true;F=function(){if(B>-1){hui.animate(A[B],"opacity",0,200,{hideOnComplete:true,delay:800})}B++;if(B>A.length-1){B=0}if(!D){hui.style.setOpacity(A[B],0);A[B].style.zIndex=E;A[B].style.display="block";hui.animate(A[B],"opacity",1,1000,{ease:hui.ease.slowFastSlow})}window.setTimeout(F,3000);E++;D=false};F()}};op.part.Formula=function(A){this.element=hui.get(A.element);this.id=A.id;this.inputs=A.inputs;hui.listen(this.element,"submit",this._send.bind(this))};op.part.Formula.prototype={_send:function(G){hui.stop(G);var F=[];for(var E=0;E<this.inputs.length;E++){var B=this.inputs[E];var H=hui.get(B.id);var C=B.validation;if(C.required){if(hui.isBlank(H.value)){hui.ui.showMessage({text:C.message,duration:2000});H.focus();return }}if(C.syntax=="email"&&!hui.isBlank(H.value)){var I=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\\n".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA\n-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!I.test(H.value)){hui.ui.showMessage({text:C.message,duration:2000});H.focus();return }}F.push({label:B.label,value:H.value})}var A=op.page.path+"services/parts/formula/";var D={id:this.id,fields:F};hui.ui.showMessage({text:"Sender besked...",busy:true});hui.ui.request({url:A,json:{data:D},onSuccess:this._onSuccess.bind(this),onFailure:this._onFailure.bind(this)})},_onSuccess:function(){hui.ui.showMessage({text:"Beskeden er nu sendt",icon:"common/success",duration:2000});this.element.reset()},_onFailure:function(){hui.ui.showMessage({text:"Beskeden kunne desværre ikke afleveres",duration:5000})}};op.part.Image=function(B){var A=this.element=hui.get(B.element);var E=A.src;var D=A.parentNode;D.style.position="relative";D.style.display="block";var C=hui.build("img",{src:A.src+"&contrast=-20&brightness=80&blur=30",style:"position: absolute; left: 0; top: 0;",parent:D});hui.animate({node:C,duration:1000,delay:1000,ease:hui.ease.flicker,css:{opacity:0}});hui.listen(C,"mouseover",function(){hui.animate({node:C,duration:500,delay:0,ease:hui.ease.fastSlow,css:{opacity:1}})});hui.listen(C,"mouseout",function(){hui.animate({node:C,duration:1000,delay:1000,ease:hui.ease.flicker,css:{opacity:0}})})};op.part.Poster=function(A){this.options=hui.override({duration:1500,interval:5000,delay:0},A);this.name=A.name;this.element=hui.get(A.element);this.container=hui.get.firstByClass(this.element,"part_poster_pages");this.pages=hui.get.byClass(this.element,"part_poster_page");this.index=0;this.indicators=[];this._buildNavigator();if(!this.options.editmode){window.setTimeout(this._callNext.bind(this),this.options.delay)}hui.listen(this.element,"click",this._onClick.bind(this));hui.ui.extend(this)};op.part.Poster.prototype={_buildNavigator:function(){this.navigator=hui.build("div",{"class":"part_poster_navigator",parent:this.element});for(var A=0;A<this.pages.length;A++){this.indicators.push(hui.build("a",{parent:this.navigator,data:A,href:"javascript://","class":A==0?"part_poster_current":""}))}},next:function(){var A=this.index+1;if(A>=this.pages.length){A=0}this.goToPage(A)},previous:function(){var A=this.index-1;if(A<0){A=this.pages.length-1}this.goToPage(A)},setPage:function(A){if(A===null||A===undefined||A==this.index||this.pages.length-1<A){return }this.pages[this.index].style.display="none";this.pages[A].style.display="block";this.index=A;for(var B=0;B<this.indicators.length;B++){hui.cls.set(this.indicators[B],"part_poster_current",B==A)}},goToPage:function(A){if(A==this.index){return }window.clearTimeout(this.timer);var B={container:this.container,duration:this.options.duration};B.hide={element:this.pages[this.index],effect:"slideLeft"};hui.cls.remove(this.indicators[this.index],"part_poster_current");this.index=A;B.show={element:this.pages[this.index],effect:"slideRight"};hui.cls.add(this.indicators[this.index],"part_poster_current");hui.transition(B);if(!this.options.editmode){this._callNext()}this.fire("pageChanged",A)},_callNext:function(){this.timer=window.setTimeout(this.next.bind(this),this.options.interval)},_onClick:function(B){B=hui.event(B);var A=B.findByTag("a");if(A&&hui.cls.has(A.parentNode,"part_poster_navigator")){this.goToPage(parseInt(A.getAttribute("data")))}}};op.part.Map=function(A){this.options=hui.override({maptype:"roadmap",zoom:8},A);this.container=hui.get(A.element);hui.ui.onReady(this.initialize.bind(this))};op.part.Map.defered=[];op.part.Map.onReady=function(A){hui.log("onReady... loaded:"+this.loaded);if(this.loaded){A()}else{this.defered.push(A)}if(this.loaded===undefined){this.loaded=false;window.opMapReady=function(){hui.log("ready");for(var B=0;B<this.defered.length;B++){this.defered[B]()}window.opMapReady=null;this.loaded=true}.bind(this);hui.require("https://maps.googleapis.com/maps/api/js?sensor=false&callback=opMapReady")}};op.part.Map.types={roadmap:"ROADMAP",terrain:"TERRAIN"};op.part.Map.prototype={initialize:function(){hui.log("init");op.part.Map.onReady(this.ready.bind(this))},ready:function(){var B={zoom:this.options.zoom,center:new google.maps.LatLng(-34.397,150.644),mapTypeId:google.maps.MapTypeId[this.options.type.toUpperCase()],scrollwheel:false};var E=this.options.markers;if(this.options.center){B.center=new google.maps.LatLng(this.options.center.latitude,this.options.center.longitude)}this.map=new google.maps.Map(this.container,B);if(this.options.center){var A=new google.maps.Marker({position:new google.maps.LatLng(this.options.center.latitude,this.options.center.longitude),map:this.map,icon:new google.maps.MarkerImage(op.context+"style/basic/gfx/part_map_pin.png",new google.maps.Size(29,30),new google.maps.Point(0,0),new google.maps.Point(8,26))});var D=hui.get.firstByClass(this.element,"part_map_text");if(D){var C=new google.maps.InfoWindow({content:hui.build("div",{text:D.innerHTML,"class":"part_map_bubble"})});C.open(this.map,A)}return ;var A=new google.maps.Marker({position:new google.maps.LatLng(this.options.center.latitude,this.options.center.longitude),map:this.map})}}};hui.transition=function(C){var E=C.hide,B=C.show;var A=hui.transition[B.effect],D=hui.transition[E.effect];hui.style.set(C.container,{height:C.container.clientHeight+"px",position:"relative"});hui.style.set(E.element,{width:C.container.clientWidth+"px",position:"absolute",boxSizing:"border-box"});hui.style.set(B.element,{width:C.container.clientWidth+"px",position:"absolute",display:"block",visibility:"hidden",boxSizing:"border-box"});hui.animate({node:C.container,css:{height:B.element.clientHeight+"px"},duration:C.duration+10,ease:hui.ease.slowFastSlow,onComplete:function(){hui.style.set(C.container,{height:"",position:""})}});D.beforeHide(E.element);D.hide(E.element,C.duration,function(){hui.style.set(E.element,{display:"none",position:"static",width:""})});A.beforeShow(B.element);hui.style.set(B.element,{display:"block",visibility:"visible"});A.show(B.element,C.duration,function(){hui.style.set(B.element,{position:"static",width:""})})};hui.transition.css=function(A){this.options=A};hui.transition.css.prototype={beforeShow:function(A){hui.style.set(A,this.options.hidden)},show:function(A,C,B){hui.animate({node:A,css:this.options.visible,duration:C,ease:hui.ease.slowFastSlow,onComplete:B})},beforeHide:function(A){hui.style.set(A,this.options.visible)},hide:function(A,C,B){hui.animate({node:A,css:this.options.hidden,duration:C,ease:hui.ease.slowFastSlow,onComplete:function(){B();hui.style.set(A,this.options.visible)}.bind(this)})}};hui.transition.dissolve=new hui.transition.css({visible:{opacity:1},hidden:{opacity:0}});hui.transition.scale=new hui.transition.css({visible:{opacity:1,transform:"scale(1)"},hidden:{opacity:0,transform:"scale(.9)"}});hui.transition.slideLeft=new hui.transition.css({visible:{opacity:1,marginLeft:"0%"},hidden:{opacity:0,marginLeft:"-100%"}});hui.transition.slideRight=new hui.transition.css({visible:{opacity:1,marginLeft:"0%"},hidden:{opacity:0,marginLeft:"100%"}});op.SearchField=function(A){A=this.options=hui.override({placeholderClass:"placeholder",placeholder:""},A);this.field=hui.get(A.element);this.field.onfocus=function(){if(this.field.value==A.placeholder){this.field.value="";hui.cls.add(this.field,A.placeholderClass)}else{this.field.select()}}.bind(this);this.field.onblur=function(){if(this.field.value==""){hui.cls.add(this.field,A.placeholderClass);this.field.value=A.placeholder}}.bind(this);this.field.onblur()};op.Dissolver=function(A){A=this.options=hui.override({wait:4000,transition:2000,delay:0},A);this.pos=Math.floor(Math.random()*(A.elements.length-0.00001));this.z=1;A.elements[this.pos].style.display="block";window.setTimeout(this.next.bind(this),A.wait+A.delay)};op.Dissolver.prototype={next:function(){this.pos++;this.z++;var B=this.options.elements;if(this.pos==B.length){this.pos=0}var A=B[this.pos];hui.style.setOpacity(A,0);hui.style.set(A,{display:"block",zIndex:this.z});hui.animate(A,"opacity",1,this.options.transition,{ease:hui.ease.slowFastSlow,onComplete:function(){window.setTimeout(this.next.bind(this),this.options.wait)}.bind(this)})}};Poster=function(){this.poster=hui.get("poster");if(!this.poster){return }this.left=hui.get("poster_left");this.right=hui.get("poster_right");this.progress=hui.get("poster_loader");this.context="style/in2isoft/gfx/";this.leftImages=["poster_in2isoft_image.png","poster_publisher_image.png","poster_in2igui_image.png","poster_onlineobjects_image.png"];this.rightImages=["poster_in2isoft_text.png","poster_publisher_text.png","poster_in2igui_text.png","poster_onlineobjects_text.png"];this.leftImages=["poster_humanise_image.png","poster_editor_image.png","poster_hui_image.png","poster_onlineobjects_image.png"];this.rightImages=["poster_humanise_text.png","poster_editor_text.png","poster_hui_text.png","poster_onlineobjects_text.png"];this.links=["om/","produkter/onlinepublisher/","teknologi/in2iGui/","produkter/onlineobjects/"];this.leftPos=-1;this.rightPos=-1;var A=this;this.poster.onclick=function(){document.location=op.page.path+A.links[A.leftPos]};this.preload()};Poster.prototype.start=function(){this.left.scrollLeft=495;var A=this;var B=op.page.path+this.context;new hui.animation.Loop([function(){A.leftPos++;if(A.leftPos>=A.leftImages.length){A.leftPos=0}hui.get("poster_inner_left").style.backgroundImage="url('"+B+A.leftImages[A.leftPos]+"')";A.rightPos++;if(A.rightPos>=A.rightImages.length){A.rightPos=0}hui.get("poster_inner_right").style.backgroundImage="url('"+B+A.rightImages[A.rightPos]+"')"},{duration:1000},{element:this.left,property:"scrollLeft",value:"0",duration:1000,ease:hui.ease.fastSlow,wait:500},{element:this.right,property:"scrollLeft",value:"495",duration:1000,ease:hui.ease.fastSlow},{duration:4000},{element:this.left,property:"scrollLeft",value:"495",duration:1000,ease:hui.ease.quintIn,wait:500},{element:this.right,property:"scrollLeft",value:"0",duration:1000,ease:hui.ease.quintIn}]).start()};Poster.prototype.preload=function(){var A=new hui.Preloader({context:op.page.path+this.context});A.setDelegate(this);A.addImages(this.leftImages);A.addImages(this.rightImages);A.load()};Poster.prototype.allImagesDidLoad=function(){this.progress.style.display="none";this.start()};Poster.prototype.imageDidLoad=function(A,B){this.progress.innerHTML=Math.round(A/B*100)+"%"}