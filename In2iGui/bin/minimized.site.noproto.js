var n2i={browser:{},ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,};if(!window.hui){var hui=n2i}n2i.browser.opera=/opera/i.test(navigator.userAgent);n2i.browser.msie=!n2i.browser.opera&&/MSIE/.test(navigator.userAgent);n2i.browser.msie6=navigator.userAgent.indexOf("MSIE 6")!==-1;n2i.browser.msie7=navigator.userAgent.indexOf("MSIE 7")!==-1;n2i.browser.msie8=navigator.userAgent.indexOf("MSIE 8")!==-1;n2i.browser.webkit=navigator.userAgent.indexOf("WebKit")!==-1;n2i.browser.safari=navigator.userAgent.indexOf("Safari")!==-1;n2i.browser.webkitVersion=null;n2i.browser.gecko=!n2i.browser.webkit&&navigator.userAgent.indexOf("Gecko")!=-1;(function(){var A=/Safari\/([\d.]+)/.exec(navigator.userAgent);if(A){n2i.browser.webkitVersion=parseFloat(A[1])}})();n2i.log=function(A){try{console.log(A)}catch(C){}};n2i.camelize=function(H){if(H.indexOf("-")==-1){return H}var E=H.split("-");var C=H.indexOf("-")==0?E[0].charAt(0).toUpperCase()+E[0].substring(1):E[0];for(var D=1,A=E.length;D<A;D++){var F=E[D];C+=F.charAt(0).toUpperCase()+F.substring(1)}return C};n2i.override=function(C,A){if(A){for(prop in A){C[prop]=A[prop]}}return C};n2i.wrap=function(A){if(A===null||A===undefined){return""}return A.split("").join("\u200B")};n2i.trim=function(A){if(!A){return A}return A.replace(/^[\s\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]+|[\s\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]+$/g,"")};n2i.escapeHTML=function(A){return document.createElement("div").appendChild(document.createTextNode(A)).innerHTML};n2i.escape=function(A){if(!n2i.isDefined(A)){return""}return A.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};n2i.isEmpty=n2i.isBlank=function(A){if(A===null||typeof (A)==="undefined"||A===""){return true}return typeof (A)=="string"&&n2i.trim(A).length==0};n2i.string={endsWith:function(C,A){if(!typeof (C)=="string"||!typeof (A)=="string"){return false}return(C.match(A+"$")==C)}};n2i.isDefined=function(A){return A!==null&&typeof (A)!=="undefined"};n2i.isArray=function(A){if(A.constructor==Array){return true}else{return Object.prototype.toString.call(A)==="[object Array]"}};n2i.inArray=function(A,D){for(var C=0;C<A.length;C++){if(A[C]==D){return true}}return false};n2i.indexInArray=function(A,D){for(var C=0;C<A.length;C++){if(A[C]==D){return C}}return -1};n2i.each=function(A,D){if(n2i.isArray(A)){for(var C=0;C<A.length;C++){D(A[C],C)}}else{for(key in A){D(key,A[key])}}};n2i.intOrString=function(C){if(n2i.isDefined(C)){var A=/[0-9]+/.exec(C);if(A!==null&&A[0]==C){if(parseInt(C,10)==C){return parseInt(C,10)}}}return C};n2i.flipInArray=function(A,C){if(n2i.inArray(A,C)){n2i.removeFromArray(A,C)}else{A.push(C)}};n2i.removeFromArray=function(A,D){for(var C=A.length-1;C>=0;C--){if(A[C]==D){A.splice(C,1)}}};n2i.addToArray=function(A,D){if(D.constructor==Array){for(var C=0;C<D.length;C++){if(!n2i.inArray(A,D[C])){A.push(D)}}}else{if(!n2i.inArray(A,D)){A.push(D)}}};n2i.toIntArray=function(C){var D=C.split(",");for(var A=D.length-1;A>=0;A--){D[A]=parseInt(D[A])}return D};n2i.scrollTo=function(A){A=$(A);if(A){var C=A.cumulativeOffset();window.scrollTo(C.left,C.top-50)}};n2i.dom={isElement:function(C,A){return C.nodeType==n2i.ELEMENT_NODE&&(A===undefined?true:C.nodeName.toLowerCase()==A)},isDefinedText:function(A){return A.nodeType==n2i.TEXT_NODE&&A.nodeValue.length>0},addText:function(A,C){A.appendChild(document.createTextNode(C))},clear:function(D){var C=D.childNodes;for(var A=C.length-1;A>=0;A--){C[A].parentNode.removeChild(C[A])}},remove:function(A){if(A.parentNode){A.parentNode.removeChild(A)}},replaceNode:function(D,C){D.parentNode.insertBefore(C,D);var E=D.childNodes;for(var A=0;A<E.length;A++){C.appendChild(D.removeChild(E[A]))}D.parentNode.removeChild(D)},replaceHTML:function(C,A){C=n2i.get(C);C.innerHTML=A},runScripts:function(node){var scripts=node.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){eval(scripts[i].innerHTML)}},setText:function(D,E){var F=D.childNodes;var A=false;for(var C=F.length-1;C>=0;C--){if(!A&&F[C].nodeType==n2i.TEXT_NODE){F[C].nodeValue=E;A=true}else{D.removeChild(F[C])}}if(!A){n2i.dom.addText(D,E)}},getText:function(D){var A="";var E=D.childNodes;for(var C=0;C<E.length;C++){if(E[C].nodeType==n2i.TEXT_NODE&&E[C].nodeValue!=null){A+=E[C].nodeValue}else{if(E[C].nodeType==n2i.ELEMENT_NODE){A+=n2i.dom.getText(E[C])}}}return A},isVisible:function(A){while(A){if(A.style&&(n2i.getStyle(A,"display")==="none"||n2i.getStyle(A,"visibility")==="hidden")){return false}A=A.parentNode}return true}};n2i.form={getValues:function(D){var E={};var A=D.getElementsByTagName("input");for(var C=0;C<A.length;C++){if(n2i.isDefined(A[C].name)){E[A[C].name]=A[C].value}}return E}};n2i.get=function(A){if(typeof (A)=="string"){return document.getElementById(A)}return A};n2i.getChildren=function(E){var D=[];var A=E.childNodes;for(var C=0;C<A.length;C++){if(n2i.dom.isElement(A[C])){D.push(A[C])}}return D};if(document.querySelector){n2i.firstByClass=function(C,D,A){C=C||document.body;return C.querySelector((A?A+".":".")+D)}}else{n2i.firstByClass=function(C,F,A){var E=(n2i.get(C)||document.body).getElementsByTagName(A||"*");for(var D=0;D<E.length;D++){if(n2i.hasClass(E[D],F)){return E[D]}}return null}}if(document.querySelectorAll){n2i.byClass=function(E,H,A){E=E||document.body;var D=E.querySelectorAll((A?A+".":".")+H);var C=[];for(var F=0,I=D.length;F!=I;C.push(D[F++])){}return C}}else{n2i.byClass=function(C,H,A){var F=(n2i.get(C)||document.body).getElementsByTagName(A||"*");var D=[];for(var E=0;E<F.length;E++){if(n2i.hasClass(F[E],H)){D[D.length]=F[E]}}return D}}n2i.firstByTag=function(C,A){C=n2i.get(C)||document.body;if(document.querySelector&&A!=="*"){return C.querySelector(A)}var D=C.getElementsByTagName(A);return D[0]};n2i.build=function(A,C){var D=document.createElement(A);if(C){for(prop in C){if(prop=="text"){D.appendChild(document.createTextNode(C.text))}else{if(prop=="html"){D.innerHTML=C.html}else{if(prop=="parent"){C.parent.appendChild(D)}else{if(prop=="className"){D.className=C.className}else{if(prop=="class"){D.className=C["class"]}else{if(n2i.isDefined(C[prop])){D.setAttribute(prop,C[prop])}}}}}}}}return D};n2i.getAncestors=function(A){var D=[];var C=A.parentNode;while(C){D[D.length]=C;C=C.parentNode}return D};n2i.getNext=function(A){if(!A){return null}if(!A.nextSibling){return null}var C=A.nextSibling;while(C&&C.nodeType!=1){C=C.nextSibling}return C};n2i.getAllNext=function(A){var D=[];var C=n2i.getNext(A);while(C){D.push(C);C=n2i.getNext(C)}return D};n2i.getTop=function(A){A=n2i.get(A);if(A){var C=A.offsetTop;var D=A.offsetParent;while(D!=null){C+=D.offsetTop;D=D.offsetParent}return C}else{return 0}};n2i.getLeft=function(A){A=n2i.get(A);if(A){var C=A.offsetLeft;var D=A.offsetParent;while(D!=null){C+=D.offsetLeft;D=D.offsetParent}return C}else{return 0}};n2i.getPosition=function(A){return{left:n2i.getLeft(A),top:n2i.getTop(A)}};n2i.hasClass=function(D,E){D=n2i.get(D);if(!D||!D.className){return false}var A=D.className.split(/\s+/);for(var C=0;C<A.length;C++){if(A[C]==E){return true}}return false};n2i.addClass=function(A,C){A=n2i.get(A);if(!A){return }n2i.removeClass(A,C);A.className+=" "+C};n2i.removeClass=function(E,F){E=n2i.get(E);if(!E){return }var C="";var A=E.className.split(/\s+/);for(var D=0;D<A.length;D++){if(A[D]!=F){if(D>0){C+=" "}C+=A[D]}}E.className=C};n2i.toggleClass=function(A,C){if(n2i.hasClass(A,C)){n2i.removeClass(A,C)}else{n2i.addClass(A,C)}};n2i.setClass=function(A,C,D){if(D){n2i.addClass(A,C)}else{n2i.removeClass(A,C)}};n2i.fromJSON=function(A){return JSON.parse(A)};n2i.toJSON=function(A){return JSON.stringify(A)};n2i.listen=function(D,C,E,A){D=n2i.get(D);if(document.addEventListener){D.addEventListener(C,E,A?true:false)}else{D.attachEvent("on"+C,E)}};n2i.unListen=function(D,C,E,A){D=n2i.get(D);if(document.removeEventListener){D.removeEventListener(C,E,A?true:false)}else{D.detachEvent("on"+C,E)}};n2i.event=function(A){return new n2i.Event(A)};n2i.Event=function(A){this.event=A=A||window.event;this.element=A.target?A.target:A.srcElement;this.shiftKey=A.shiftKey;this.returnKey=A.keyCode==13;this.escapeKey=A.keyCode==27;this.spaceKey=A.keyCode==32;this.upKey=A.keyCode==38;this.downKey=A.keyCode==40;this.leftKey=A.keyCode==37;this.rightKey=A.keyCode==39;this.keyCode=A.keyCode};n2i.Event.prototype={left:function(){var A=0;if(this.event){if(this.event.pageX){A=this.event.pageX}else{if(this.event.clientX){A=this.event.clientX+n2i.getScrollLeft()}}}return A},getLeft:function(){return this.left()},top:function(){var A=0;if(this.event){if(this.event.pageY){A=this.event.pageY}else{if(this.event.clientY){A=this.event.clientY+n2i.getScrollTop()}}}return A},getTop:function(){return this.top()},getElement:function(){return this.element},findByClass:function(A){var C=this.element;while(C){if(n2i.hasClass(C,A)){return C}C=C.parentNode}return null},findByTag:function(A){var C=this.element;while(C){if(C.tagName&&C.tagName.toLowerCase()==A){return C}C=C.parentNode}return null},stop:function(){n2i.stop(this.event)}};n2i.stop=function(A){if(!A){A=window.event}if(A.stopPropagation){A.stopPropagation()}if(A.preventDefault){A.preventDefault()}A.cancelBubble=true;A.stopped=true};n2i.onReady=function(A){if(window.addEventListener){window.addEventListener("DOMContentLoaded",A,false)}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",A,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",A)}else{if(typeof window.onload=="function"){var C=window.onload;window.onload=function(){C();A()}}else{window.onload=A}}}}};n2i.request=function(D){D=n2i.override({method:"POST",async:true},D);var H=n2i.request.createTransport();var C=this;H.onreadystatechange=function(){try{if(H.readyState==4){if(H.status==200&&D.onSuccess){D.onSuccess(H)}else{if(D.onFailure){D.onFailure(H)}}}}catch(I){if(D.onException){D.onException(I,H)}else{throw I}}};var F=D.method.toUpperCase();H.open(F,D.url,D.async);var E=null;var A="";if(F=="POST"&&D.parameters){A=n2i.request.buildPostBody(D.parameters);H.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8")}H.send(A)};n2i.request.isXMLResponse=function(A){return A.responseXML&&A.responseXML.documentElement&&A.responseXML.documentElement.nodeName!="parsererror"};n2i.request.buildPostBody=function(C){if(!C){return null}var A="";for(param in C){if(A.length>0){A+="&"}A+=encodeURIComponent(param)+"=";if(C[param]!==undefined&&C[param]!==null){A+=encodeURIComponent(C[param])}}return A};n2i.request.createTransport=function(){try{if(window.XMLHttpRequest){var C=new XMLHttpRequest();if(C.readyState==null){C.readyState=1;C.addEventListener("load",function(){C.readyState=4;if(typeof C.onreadystatechange=="function"){C.onreadystatechange()}},false)}return C}else{if(window.ActiveXObject){return n2i.request.getActiveX()}else{this.delegate.onError(this)}}}catch(A){if(this.delegate.onError){this.delegate.onError(this,A)}}};n2i.request.getActiveX=function(){var D=["MSXML2","Microsoft","MSXML","MSXML3"];var E;for(var C=0;C<D.length;C++){try{E=new ActiveXObject(D[C]+".XmlHttp");return E}catch(A){}}throw new Error("Could not find an installed XML parser")};n2i.getStyle=function(C,D){C=n2i.get(C);var F=n2i.camelize(D);var E=C.style[F];if(!E){if(document.defaultView&&document.defaultView.getComputedStyle){var A=document.defaultView.getComputedStyle(C,null);E=A?A.getPropertyValue(D):null}else{if(C.currentStyle){E=C.currentStyle[F]}}}if(window.opera&&["left","top","right","bottom"].include(D)){if(n2i.getStyle(C,"position")=="static"){E="auto"}}return E=="auto"?null:E};n2i.setOpacity=function(C,A){if(n2i.browser.msie){if(A==1){C.style["filter"]=null}else{C.style["filter"]="alpha(opacity="+(A*100)+")"}}else{C.style["opacity"]=A}};n2i.setStyle=function(A,C){for(style in C){if(style==="opacity"){n2i.setOpacity(A,C[style])}else{A.style[style]=C[style]}}};n2i.copyStyle=function(F,H,E){for(var A=0;A<E.length;A++){var C=E[A];var D=n2i.getStyle(F,C);if(D){H.style[C]=D}}};n2i.getFrameDocument=function(A){if(A.contentDocument){return A.contentDocument}else{if(A.contentWindow){return A.contentWindow.document}else{if(A.document){return A.document}}}};n2i.getFrameWindow=function(A){if(A.defaultView){return A.defaultView}else{if(A.contentWindow){return A.contentWindow}}};n2i.getSelectedText=function(A){A=A||document;if(A.getSelection){return A.getSelection()+""}else{if(A.selection){return A.selection.createRange().text}}return""};n2i.selection={clear:function(){var A;if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){A=window.getSelection();if(A&&A.removeAllRanges){A.removeAllRanges()}}}},getText:function(A){A=A||document;if(A.getSelection){return A.getSelection()+""}else{if(A.selection){return A.selection.createRange().text}}return""}};n2i.effect={makeFlippable:function(A){n2i.addClass(A.container,"in2igui_flip_container");n2i.addClass(A.front,"in2igui_flip_front");n2i.addClass(A.back,"in2igui_flip_back")},flip:function(C){var D=n2i.get(C.element);var F=C.duration||"1s";var E=n2i.firstByClass(D,"in2igui_flip_front");var A=n2i.firstByClass(D,"in2igui_flip_back");E.style.webkitTransitionDuration=F;A.style.webkitTransitionDuration=F;n2i.toggleClass(C.element,"in2igui_flip_flipped")}};n2i.getScrollTop=function(){if(self.pageYOffset){return self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop}else{if(document.body){return document.body.scrollTop}}}};n2i.getScrollLeft=function(){if(self.pageYOffset){return self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollLeft}else{if(document.body){return document.body.scrollLeft}}}};n2i.getViewPortHeight=function(){if(window.innerHeight){return window.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight}else{if(document.body){return document.body.clientHeight}}}};n2i.getViewPortWidth=function(){if(window.innerWidth){return window.innerWidth}else{if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth}else{if(document.body){return document.body.clientWidth}}}};n2i.getDocumentWidth=function(){return Math.max(document.body.clientWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth);return document.body.scrollWidth};n2i.getDocumentHeight=function(){if(n2i.browser.msie6){var A=Math.max(document.body.clientHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight);var D=document.body.childNodes;for(var C=0;C<D.length;C++){if(n2i.dom.isElement(D[C])){A=Math.max(A,D[C].clientHeight)}}return A}if(window.scrollMaxY&&window.innerHeight){return window.scrollMaxY+window.innerHeight}else{return Math.max(document.body.clientHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight)}};n2i.place=function(D){var H=0,F=0;var A=D.target.element;var E={left:n2i.getLeft(A),top:n2i.getTop(A)};H=E.left+A.clientWidth*D.target.horizontal;F=E.top+A.clientHeight*D.target.vertical;var I=D.source.element;H-=I.clientWidth*D.source.horizontal;F-=I.clientHeight*D.source.vertical;if(D.insideViewPort){var C=n2i.getViewPortWidth();if(H+I.clientWidth>C){H=C-I.clientWidth}if(H<0){H=0}if(F<0){F=0}}var I=D.source.element;I.style.top=F+"px";I.style.left=H+"px"};n2i.Preloader=function(A){this.options=A||{};this.delegate={};this.images=[];this.loaded=0};n2i.Preloader.prototype={addImages:function(A){if(typeof (A)=="object"){for(var C=0;C<A.length;C++){this.images.push(A[C])}}else{this.images.push(A)}},setDelegate:function(A){this.delegate=A},load:function(F){F=F||0;var C=this;this.obs=[];for(var E=F;E<this.images.length+F;E++){var D=E;if(D>=this.images.length){D=D-this.images.length}var A=new Image();A.n2iPreloaderIndex=D;A.onload=function(){C.imageChanged(this.n2iPreloaderIndex,"imageDidLoad")};A.onerror=function(){C.imageChanged(this.n2iPreloaderIndex,"imageDidGiveError")};A.onabort=function(){C.imageChanged(this.n2iPreloaderIndex,"imageDidAbort")};A.src=(this.options.context?this.options.context:"")+this.images[D];this.obs.push(A)}},imageChanged:function(A,C){this.loaded++;if(this.delegate[C]){this.delegate[C](this.loaded,this.images.length,A)}if(this.loaded==this.images.length&&this.delegate.allImagesDidLoad){this.delegate.allImagesDidLoad()}}};n2i.cookie={set:function(D,E,F){if(F){var C=new Date();C.setTime(C.getTime()+(F*24*60*60*1000));var A="; expires="+C.toGMTString()}else{var A=""}document.cookie=D+"="+E+A+"; path=/"},get:function(C){var E=C+"=";var A=document.cookie.split(";");for(var D=0;D<A.length;D++){var F=A[D];while(F.charAt(0)==" "){F=F.substring(1,F.length)}if(F.indexOf(E)==0){return F.substring(E.length,F.length)}}return null},clear:function(A){this.set(A,"",-1)}};n2i.URL=function(A){this.url=A||""};n2i.URL.prototype={addParameter:function(A,C){this.url+=this.url.indexOf("?")!=-1?"&":"?";this.url+=A+"="+(n2i.isDefined(C)?C:"")},toString:function(){return this.url}};n2i.location={getParameter:function(A){var D=n2i.location.getParameters();for(var C=0;C<D.length;C++){if(D[C].name==A){return D[C].value}}return null},setParameter:function(A,F){var D=n2i.location.getParameters();var E=false;for(var C=0;C<D.length;C++){if(D[C].name==A){D[C].value=F;E=true;break}}if(!E){D.push({name:A,value:F})}n2i.location.setParameters(D)},hasHash:function(A){var C=document.location.hash;if(C!==""){return C=="#"+A}return false},getHashParameter:function(A){var E=document.location.hash;if(E!==""){var C=E.indexOf(A+"=");if(C!==-1){var D=E.substring(C+A.length+1);if(D.indexOf("&")!==-1){return D.substring(0,D.indexOf("&"))}return D}}return null},clearHash:function(){document.location.hash="#"},setParameters:function(C){var D="";for(var A=0;A<C.length;A++){D+=A==0?"?":"&";D+=C[A].name+"="+C[A].value}document.location.search=D},getBoolean:function(A){var C=n2i.location.getParameter(A);return(C=="true"||C=="1")},getParameters:function(){var C=document.location.search.substring(1).split("&");var A=[];for(var E=0;E<C.length;E++){var F=C[E].split("=");var D=unescape(F[0]).replace(/^\s*|\s*$/g,"");var H=unescape(F[1]).replace(/^\s*|\s*$/g,"");if(D){A.push({name:D,value:H})}}return A}};n2i.ani=n2i.animate=function(A,D,E,F,C){n2i.animation.get(A).animate(null,E,D,F,C)};n2i.animation={objects:{},running:false,latestId:0,get:function(A){A=n2i.get(A);if(!A.n2iAnimationId){A.n2iAnimationId=this.latestId++}if(!this.objects[A.n2iAnimationId]){this.objects[A.n2iAnimationId]=new n2i.animation.Item(A)}return this.objects[A.n2iAnimationId]},start:function(){if(!this.running){n2i.animation.render()}}};n2i.animation.render=function(H){this.running=true;var J=false;var A=new Date().getTime();for(id in this.objects){var F=this.objects[id];if(F.work){for(var I=0;I<F.work.length;I++){var M=F.work[I];if(M.finished){continue}var E=(A-M.start)/(M.end-M.start);if(E<0){J=true;continue}else{if(isNaN(E)){E=1}else{if(E>1){E=1}else{if(E<1){J=true}}}}var P=E;if(M.delegate&&M.delegate.ease){P=M.delegate.ease(P)}var O=null;if(!M.css){F.element[M.property]=Math.round(M.from+(M.to-M.from)*P)}else{if(M.property=="transform"&&!n2i.browser.msie){var Q=M.transform;var L="";if(Q.rotate){L+=" rotate("+(Q.rotate.from+(Q.rotate.to-Q.rotate.from)*P)+Q.rotate.unit+")"}if(Q.scale){L+=" scale("+(Q.scale.from+(Q.scale.to-Q.scale.from)*P)+")"}F.element.style[n2i.animation.TRANSFORM]=L}else{if(M.to.red!=null){var C=Math.round(M.from.red+(M.to.red-M.from.red)*P);var D=Math.round(M.from.green+(M.to.green-M.from.green)*P);var N=Math.round(M.from.blue+(M.to.blue-M.from.blue)*P);O="rgb("+C+","+D+","+N+")";F.element.style[M.property]=O}else{if(n2i.browser.msie&&M.property=="opacity"){var K=(M.from+(M.to-M.from)*P);if(K==1){F.element.style.removeAttribute("filter")}else{F.element.style["filter"]="alpha(opacity="+(K*100)+")"}}else{O=new String(M.from+(M.to-M.from)*P)+(M.unit!=null?M.unit:"");F.element.style[M.property]=O}}}}if(E==1){M.finished=true;if(M.delegate&&M.delegate.onComplete){window.setTimeout(M.delegate.onComplete)}else{if(M.delegate&&M.delegate.hideOnComplete){F.element.style.display="none"}}}}}}if(J){window.setTimeout(function(){n2i.animation.render()},0)}else{this.running=false}};n2i.animation.parseStyle=function(E){var C={type:null,value:null,unit:null};var D;if(!n2i.isDefined(E)){return C}else{if(!isNaN(E)){C.value=parseFloat(E)}else{if(D=E.match(/([\-]?[0-9\.]+)(px|pt|%)/)){C.type="length";C.value=parseFloat(D[1]);C.unit=D[2]}else{if(D=E.match(/rgb\(([0-9]+),[ ]?([0-9]+),[ ]?([0-9]+)\)/)){C.type="color";C.value={red:parseInt(D[1]),green:parseInt(D[2]),blue:parseInt(D[3])}}else{var A=new n2i.Color(E);if(A.ok){C.value={red:A.r,green:A.g,blue:A.b}}}}}}return C};n2i.animation.Item=function(A){this.element=A;this.work=[]};n2i.animation.Item.prototype.animate=function(J,K,L,C,H){var E=true;if(L=="scrollLeft"||L=="scrollTop"){E=false}var I=this.getWork(E?n2i.camelize(L):L);I.delegate=H;I.finished=false;I.css=E;if(J!=null){I.from=J}else{if(L=="transform"){I.transform=n2i.animation.Item.parseTransform(K,this.element)}else{if(I.css&&n2i.browser.msie&&L=="opacity"){I.from=this.getIEOpacity(this.element)}else{if(I.css){var A=n2i.getStyle(this.element,L);var D=n2i.animation.parseStyle(A);I.from=D.value}else{I.from=this.element[L]}}}}if(I.css){var F=n2i.animation.parseStyle(K);I.to=F.value;I.unit=F.unit}else{I.to=K;I.unit=null}I.start=new Date().getTime();if(H&&H.delay){I.start+=H.delay}I.end=I.start+C;n2i.animation.start()};n2i.animation.TRANSFORM=n2i.browser.gecko?"MozTransform":"WebkitTransform";n2i.animation.Item.parseTransform=function(I,E){var K={};var J=/rotate\(([0-9\.]+)([a-z]+)\)/i;var D=I.match(J);if(D){var H=0;if(E.style[n2i.animation.TRANSFORM]){var F=E.style[n2i.animation.TRANSFORM].match(J);if(F){H=parseFloat(F[1])}}K.rotate={from:H,to:parseFloat(D[1]),unit:D[2]}}var A=/scale\(([0-9\.]+)\)/i;var C=I.match(A);if(C){var H=1;if(E.style[n2i.animation.TRANSFORM]){var F=E.style[n2i.animation.TRANSFORM].match(A);if(F){H=parseFloat(F[1])}}K.scale={from:H,to:parseFloat(C[1])}}return K};n2i.animation.Item.prototype.getIEOpacity=function(C){var D=n2i.getStyle(C,"filter").toLowerCase();var A;if(A=D.match(/opacity=([0-9]+)/)){return parseFloat(A[1])/100}else{return 1}};n2i.animation.Item.prototype.getWork=function(D){for(var C=0;C<this.work.length;C++){if(this.work[C].property==D){return this.work[C]}}var A={property:D};this.work[this.work.length]=A;return A};n2i.animation.Loop=function(A){this.recipe=A;this.position=-1;this.running=false};n2i.animation.Loop.prototype.next=function(){this.position++;if(this.position>=this.recipe.length){this.position=0}var C=this.recipe[this.position];if(typeof (C)=="function"){C()}else{if(C.element){n2i.ani(C.element,C.property,C.value,C.duration,{ease:C.ease})}}var A=this;var D=C.duration||0;window.setTimeout(function(){A.next()},D)};n2i.animation.Loop.prototype.start=function(){this.running=true;this.next()};n2i.Color=function(I){this.ok=false;if(I.charAt(0)=="#"){I=I.substr(1,6)}I=I.replace(/ /g,"");I=I.toLowerCase();var A={white:"ffffff",black:"000000",red:"ff0000",green:"00ff00",blue:"0000ff"};for(var D in A){if(I==D){I=A[D]}}var J=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(K){return[parseInt(K[1]),parseInt(K[2]),parseInt(K[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(K){return[parseInt(K[1],16),parseInt(K[2],16),parseInt(K[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(K){return[parseInt(K[1]+K[1],16),parseInt(K[2]+K[2],16),parseInt(K[3]+K[3],16)]}}];for(var C=0;C<J.length;C++){var F=J[C].re;var E=J[C].process;var H=F.exec(I);if(H){channels=E(H);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var M=this.r.toString(16);var L=this.g.toString(16);var K=this.b.toString(16);if(M.length==1){M="0"+M}if(L.length==1){L="0"+L}if(K.length==1){K="0"+K}return"#"+M+L+K}};n2i.Color.hsv2rgb=function(E,D,A){var C=E/360;if(D==0){R=A*255;G=A*255;B=A*255}else{var_h=C*6;var_i=Math.floor(var_h);var_1=A*(1-D);var_2=A*(1-D*(var_h-var_i));var_3=A*(1-D*(1-(var_h-var_i)));if(var_i==0){var_r=A;var_g=var_3;var_b=var_1}else{if(var_i==1){var_r=var_2;var_g=A;var_b=var_1}else{if(var_i==2){var_r=var_1;var_g=A;var_b=var_3}else{if(var_i==3){var_r=var_1;var_g=var_2;var_b=A}else{if(var_i==4){var_r=var_3;var_g=var_1;var_b=A}else{var_r=A;var_g=var_1;var_b=var_2}}}}}R=Math.round(var_r*255);G=Math.round(var_g*255);B=Math.round(var_b*255)}return new Array(R,G,B)};n2i.Color.rgb2hex=function(A){var D="#";for(i=0;i<3;i++){var C=parseInt(A[i]).toString(16);if(C.length<2){C="0"+C}D+=C}return D};n2i.ease={slowFastSlow:function(D){var C=1.6;var A=1.4;return -1*Math.pow(Math.cos((Math.PI/2)*Math.pow(D,C)),Math.pow(Math.PI,A))+1},fastSlow:function(D){var C=0.5;var A=0.7;return -1*Math.pow(Math.cos((Math.PI/2)*Math.pow(D,C)),Math.pow(Math.PI,A))+1},elastic:function(A){return 1-n2i.ease.elastic2(1-A)},elastic2:function(C,A,E){if(C<=0||C>=1){return C}if(!E){E=0.45}var D;if(!A||A<1){A=1;D=E/4}else{D=E/(2*Math.PI)*Math.asin(1/A)}return -(A*Math.pow(2,10*(C-=1))*Math.sin((C-D)*(2*Math.PI)/E))},bounce:function(A){if(A<(1/2.75)){return 7.5625*A*A}else{if(A<(2/2.75)){return(7.5625*(A-=(1.5/2.75))*A+0.75)}else{if(A<(2.5/2.75)){return(7.5625*(A-=(2.25/2.75))*A+0.9375)}else{return(7.5625*(A-=(2.625/2.75))*A+0.984375)}}}},linear:function(A){return A},quadIn:function(A){return Math.pow(A,2)},quadOut:function(A){return A*(A-2)*-1},quadInOut:function(A){A=A*2;if(A<1){return Math.pow(A,2)/2}return -1*((--A)*(A-2)-1)/2},cubicIn:function(A){return Math.pow(A,3)},cubicOut:function(A){return Math.pow(A-1,3)+1},cubicInOut:function(A){A=A*2;if(A<1){return Math.pow(A,3)/2}A-=2;return(Math.pow(A,3)+2)/2},quartIn:function(A){return Math.pow(A,4)},quartOut:function(A){return -1*(Math.pow(A-1,4)-1)},quartInOut:function(A){A=A*2;if(A<1){return Math.pow(A,4)/2}A-=2;return -1/2*(Math.pow(A,4)-2)},quintIn:function(A){return Math.pow(A,5)},quintOut:function(A){return Math.pow(A-1,5)+1},quintInOut:function(A){A=A*2;if(A<1){return Math.pow(A,5)/2}A-=2;return(Math.pow(A,5)+2)/2},sineIn:function(A){return -1*Math.cos(A*(Math.PI/2))+1},sineOut:function(A){return Math.sin(A*(Math.PI/2))},sineInOut:function(A){return -1*(Math.cos(Math.PI*A)-1)/2},expoIn:function(A){return(A==0)?0:Math.pow(2,10*(A-1))},expoOut:function(A){return(A==1)?1:(-1*Math.pow(2,-10*A)+1)},expoInOut:function(A){if(A==0){return 0}if(A==1){return 1}A=A*2;if(A<1){return Math.pow(2,10*(A-1))/2}--A;return(-1*Math.pow(2,-10*A)+2)/2},circIn:function(A){return -1*(Math.sqrt(1-Math.pow(A,2))-1)},circOut:function(A){A=A-1;return Math.sqrt(1-Math.pow(A,2))},circInOut:function(A){A=A*2;if(A<1){return -1/2*(Math.sqrt(1-Math.pow(A,2))-1)}A-=2;return 1/2*(Math.sqrt(1-Math.pow(A,2))+1)},backIn:function(C){var A=1.70158;return Math.pow(C,2)*((A+1)*C-A)},backOut:function(C){C=C-1;var A=1.70158;return Math.pow(C,2)*((A+1)*C+A)+1},backInOut:function(C){var A=1.70158*1.525;C=C*2;if(C<1){return(Math.pow(C,2)*((A+1)*C-A))/2}C-=2;return(Math.pow(C,2)*((A+1)*C+A)+2)/2},elasticIn:function(D){if(D==0){return 0}if(D==1){return 1}var C=0.3;var A=C/4;D=D-1;return -1*Math.pow(2,10*D)*Math.sin((D-A)*(2*Math.PI)/C)},elasticOut:function(D){if(D==0){return 0}if(D==1){return 1}var C=0.3;var A=C/4;return Math.pow(2,-10*D)*Math.sin((D-A)*(2*Math.PI)/C)+1},elasticInOut:function(D){if(D==0){return 0}D=D*2;if(D==2){return 1}var C=0.3*1.5;var A=C/4;if(D<1){D-=1;return -0.5*(Math.pow(2,10*D)*Math.sin((D-A)*(2*Math.PI)/C))}D-=1;return 0.5*(Math.pow(2,-10*D)*Math.sin((D-A)*(2*Math.PI)/C))+1},bounceIn:function(A){return(1-n2i.ease.bounceOut(1-A))},bounceOut:function(E){var C=7.5625;var D=2.75;var A;if(E<(1/D)){A=C*Math.pow(E,2)}else{if(E<(2/D)){E-=(1.5/D);A=C*Math.pow(E,2)+0.75}else{if(E<(2.5/D)){E-=(2.25/D);A=C*Math.pow(E,2)+0.9375}else{E-=(2.625/D);A=C*Math.pow(E,2)+0.984375}}}return A},bounceInOut:function(A){if(A<0.5){return n2i.ease.bounceIn(A*2)/2}return(n2i.ease.bounceOut(A*2-1)/2)+0.5}};if(!Function.prototype.bind){Function.prototype.bind=function(){if(arguments.length<2&&arguments[0]===undefined){return this}var D=this,A=Array.prototype.slice.call(arguments),C=A.shift();return function(){return D.apply(C,A.concat(Array.prototype.slice.call(arguments)))}};Function.bind=function(){var A=Array.prototype.slice.call(arguments);return Function.prototype.bind.apply(A.shift(),A)}}function In2iGui(){this.domLoaded=false;this.overflows=null;this.delegates=[];this.objects={};this.layoutWidgets=[];this.addBehavior()}window.ui=In2iGui;In2iGui.latestObjectIndex=0;In2iGui.latestIndex=500;In2iGui.latestPanelIndex=1000;In2iGui.latestAlertIndex=1500;In2iGui.latestTopIndex=2000;In2iGui.toolTips={};In2iGui.context="";In2iGui.language="en";In2iGui.state="default";In2iGui.get=function(A){if(!In2iGui.instance){In2iGui.instance=new In2iGui()}if(A){if(A.element){return A}return In2iGui.instance.objects[A]}else{return In2iGui.instance}};n2i.onReady(function(){In2iGui.get().ignite()});In2iGui.prototype={ignite:function(){if(window.dwr){if(dwr&&dwr.engine&&dwr.engine.setErrorHandler){dwr.engine.setErrorHandler(function(C,A){n2i.log(C);n2i.log(A);In2iGui.get().alert({title:"An unexpected error occurred!",text:C,emotion:"gasp"})})}}this.domLoaded=true;In2iGui.domReady=true;this.resize();In2iGui.callSuperDelegates(this,"ready");this.reLayout();n2i.listen(window,"resize",this.reLayout.bind(this))},addBehavior:function(){n2i.listen(window,"resize",this.resize.bind(this))},listen:function(A){this.delegates.push(A)},getTopPad:function(A){var C,D;C=parseInt(n2i.getStyle(A,"padding"),10);D=parseInt(n2i.getStyle(A,"padding-top"),10);if(C){return C}if(D){return D}return 0},getBottomPad:function(C){var D,A;D=parseInt(n2i.getStyle(C,"padding"),10);A=parseInt(n2i.getStyle(C,"padding-bottom"),10);if(D){return D}if(A){return A}return 0},resize:function(){if(!this.overflows){return }var A=n2i.getViewPortHeight();for(var C=0;C<this.overflows.length;C++){var D=this.overflows[C];if(n2i.browser.webkit||n2i.browser.gecko){D.element.style.display="none";D.element.style.width=D.element.parentNode.clientWidth+"px";D.element.style.display=""}D.element.style.height=A+D.diff+"px"}},registerOverflow:function(D,A){if(!this.overflows){this.overflows=[]}var C=n2i.get(D);this.overflows.push({element:C,diff:A})},alert:function(A){if(!this.alertBox){this.alertBox=In2iGui.Alert.create(A);this.alertBoxButton=In2iGui.Button.create({name:"in2iGuiAlertBoxButton",text:"OK"});this.alertBoxButton.listen(this);this.alertBox.addButton(this.alertBoxButton)}else{this.alertBox.update(A)}this.alertBoxCallBack=A.onOK;this.alertBoxButton.setText(A.button?A.button:"OK");this.alertBox.show()},$click$in2iGuiAlertBoxButton:function(){In2iGui.get().alertBox.hide();if(this.alertBoxCallBack){this.alertBoxCallBack();this.alertBoxCallBack=null}},confirm:function(A){if(!A.name){A.name="in2iguiConfirm"}var E=In2iGui.get(A.name);var C;if(!E){E=In2iGui.Alert.create(A);var D=In2iGui.Button.create({name:name+"_cancel",text:A.cancel||"Cancel",highlighted:A.highlighted==="cancel"});D.listen({$click:function(){E.hide();if(A.onCancel){A.onCancel()}In2iGui.callDelegates(E,"cancel")}});E.addButton(D);C=In2iGui.Button.create({name:name+"_ok",text:A.ok||"OK",highlighted:A.highlighted==="ok"});E.addButton(C)}else{E.update(A);C=In2iGui.get(name+"_ok");C.setText(A.ok||"OK");C.setHighlighted(A.highlighted=="ok");C.clearDelegates();In2iGui.get(name+"_cancel").setText(A.ok||"Cancel");In2iGui.get(name+"_cancel").setHighlighted(A.highlighted=="cancel");if(A.cancel){In2iGui.get(name+"_cancel").setText(A.cancel)}}C.listen({$click:function(){E.hide();if(A.onOK){A.onOK()}In2iGui.callDelegates(E,"ok")}});E.show()},reLayout:function(){for(var A=this.layoutWidgets.length-1;A>=0;A--){this.layoutWidgets[A]["$$layout"]()}},getDescendants:function(I){var H=[],D=I.getElement?I.getElement():I;if(D){var F=D.getElementsByTagName("*");var E=[];for(key in this.objects){E.push(this.objects[key])}for(var C=0;C<F.length;C++){for(var A=0;A<E.length;A++){if(F[C]==E[A].element){H.push(E[A])}}}}return H},getAncestors:function(E){var I=[];var F=E.element;if(F){var A=n2i.getAncestors(F);var H=[];for(key in this.objects){H.push(this.objects[key])}for(var D=0;D<A.length;D++){for(var C=0;C<H.length;C++){if(H[C].element==A[D]){I.push(H[C])}}}}return I},getAncestor:function(E,C){var A=this.getAncestors(E);for(var D=0;D<A.length;D++){if(n2i.hasClass(A[D].getElement(),C)){return A[D]}}return null}};In2iGui.confirmOverlays={};In2iGui.confirmOverlay=function(C){var F=C.element||C.widget.getElement();if(In2iGui.confirmOverlays[F]){var A=In2iGui.confirmOverlays[F];A.clear()}else{var A=ui.Overlay.create({modal:true});In2iGui.confirmOverlays[F]=A}if(C.text){A.addText(C.text)}var D=ui.Button.create({text:C.okText||"OK",highlighted:"true"});D.click(function(){if(C.onOk){C.onOk()}A.hide()});A.add(D);var E=ui.Button.create({text:C.cancelText||"Cancel"});E.onClick(function(){A.hide()});A.add(E);A.show({element:F})};In2iGui.destroyDescendants=function(C){var F=In2iGui.get().getDescendants(C);var D=In2iGui.get().objects;for(var A=0;A<F.length;A++){var E=delete (D[F[A].name]);if(!E){n2i.log("not found: "+F[A].name)}}};In2iGui.changeState=function(C){if(In2iGui.state===C){return }var A=In2iGui.get().objects;for(key in A){var D=A[key];if(D.options&&D.options.state){if(D.options.state==C){D.show()}else{D.hide()}}}In2iGui.state=C};In2iGui.nextIndex=function(){In2iGui.latestIndex++;return In2iGui.latestIndex};In2iGui.nextPanelIndex=function(){In2iGui.latestPanelIndex++;return In2iGui.latestPanelIndex};In2iGui.nextAlertIndex=function(){In2iGui.latestAlertIndex++;return In2iGui.latestAlertIndex};In2iGui.nextTopIndex=function(){In2iGui.latestTopIndex++;return In2iGui.latestTopIndex};In2iGui.showCurtain=function(C,E){var D=C.widget;if(!D.curtain){D.curtain=n2i.build("div",{"class":"in2igui_curtain",style:"z-index:none"});D.curtain.onclick=function(){if(D["$curtainWasClicked"]){D["$curtainWasClicked"]()}};var A=n2i.firstByClass(document.body,"in2igui_body");if(!A){A=document.body}A.appendChild(D.curtain)}if(C.color){D.curtain.style.backgroundColor=C.color}if(n2i.browser.msie){D.curtain.style.height=n2i.getDocumentHeight()+"px"}else{D.curtain.style.position="fixed";D.curtain.style.top="0";D.curtain.style.left="0";D.curtain.style.bottom="0";D.curtain.style.right="0"}D.curtain.style.zIndex=C.zIndex;n2i.setOpacity(D.curtain,0);D.curtain.style.display="block";n2i.ani(D.curtain,"opacity",0.7,1000,{ease:n2i.ease.slowFastSlow})};In2iGui.hideCurtain=function(A){if(A.curtain){n2i.ani(A.curtain,"opacity",0,200,{hideOnComplete:true})}};In2iGui.alert=function(A){In2iGui.get().alert(A)};In2iGui.showMessage=function(C){if(typeof (C)=="string"){C={text:C}}if(!In2iGui.message){In2iGui.message=n2i.build("div",{"class":"in2igui_message",html:"<div><div></div></div>"});if(!n2i.browser.msie){n2i.setOpacity(In2iGui.message,0)}document.body.appendChild(In2iGui.message)}var A=In2iGui.message.getElementsByTagName("div")[1];if(C.icon){n2i.dom.clear(A);A.appendChild(In2iGui.createIcon(C.icon,24));n2i.dom.addText(A,C.text)}else{if(C.busy){A.innerHTML='<span class="in2igui_message_busy"></span>';n2i.dom.addText(A,C.text)}else{n2i.dom.setText(A,C.text)}}In2iGui.message.style.display="block";In2iGui.message.style.zIndex=In2iGui.nextTopIndex();In2iGui.message.style.marginLeft=(In2iGui.message.clientWidth/-2)+"px";In2iGui.message.style.marginTop=n2i.getScrollTop()+"px";if(!n2i.browser.msie){n2i.ani(In2iGui.message,"opacity",1,300)}window.clearTimeout(In2iGui.messageTimer);if(C.duration){In2iGui.messageTimer=window.setTimeout(In2iGui.hideMessage,C.duration)}};In2iGui.hideMessage=function(){if(In2iGui.message){if(!n2i.browser.msie){n2i.ani(In2iGui.message,"opacity",0,300,{hideOnComplete:true})}else{In2iGui.message.style.display="none"}}};In2iGui.showToolTip=function(A){var D=A.key||"common";var C=In2iGui.toolTips[D];if(!C){C=n2i.build("div",{"class":"in2igui_tooltip",style:"display:none;",html:"<div><div></div></div>",parent:document.body});In2iGui.toolTips[D]=C}C.onclick=function(){In2iGui.hideToolTip(A)};var F=n2i.get(A.element);var E=n2i.getPosition(F);C.select("div")[1].update(A.text);if(C.style.display=="none"&&!n2i.browser.msie){n2i.setOpacity(C,0)}n2i.setStyle(C,{"display":"block",zIndex:In2iGui.nextTopIndex()});n2i.setStyle(C,{left:(E.left-C.clientWidth+4)+"px",top:(E.top+2-(C.clientHeight/2)+(F.clientHeight/2))+"px"});if(!n2i.browser.msie){n2i.ani(C,"opacity",1,300)}};In2iGui.hideToolTip=function(A){var D=A?A.key||"common":"common";var C=In2iGui.toolTips[D];if(C){if(!n2i.browser.msie){n2i.ani(C,"opacity",0,300,{hideOnComplete:true})}else{n2i.style.display="none"}}};In2iGui.getElement=function(A){if(n2i.dom.isElement(A)){return A}else{if(A.getElement){return A.getElement()}}return null};In2iGui.isWithin=function(C,A){C=new n2i.Event(C);var E={left:n2i.getLeft(A),top:n2i.getTop(A)};var D={width:A.clientWidth,height:A.clientHeight};return C.left()>E.left&&C.left()<E.left+D.width&&C.top()>E.top&&C.top()<E.top+D.height};In2iGui.getIconUrl=function(C,A){return In2iGui.context+"/In2iGui/icons/"+C+A+".png"};In2iGui.createIcon=function(C,A){return n2i.build("span",{"class":"in2igui_icon in2igui_icon_"+A,style:"background-image: url("+In2iGui.getIconUrl(C,A)+")"})};In2iGui.onDomReady=In2iGui.onReady=function(A){if(In2iGui.domReady){return A()}if(n2i.browser.gecko&&n2i.string.endsWith(document.baseURI,"xml")){window.setTimeout(A,1000);return }n2i.onReady(A)};In2iGui.wrapInField=function(C){var A=n2i.build("div",{"class":"in2igui_field",html:'<span class="in2igui_field_top"><span><span></span></span></span><span class="in2igui_field_middle"><span class="in2igui_field_middle"><span class="in2igui_field_content"></span></span></span><span class="in2igui_field_bottom"><span><span></span></span></span>'});n2i.firstByClass(A,"in2igui_field_content").appendChild(C);return A};In2iGui.addFocusClass=function(C){var A=C.classElement||C.element,D=C["class"];n2i.listen(C.element,"focus",function(){n2i.addClass(A,D)});n2i.listen(C.element,"blur",function(){n2i.removeClass(A,D)})};In2iGui.NumberValidator=function(A){n2i.override({allowNull:false,min:0,max:10},A);this.min=A.min;this.max=A.max;this.allowNull=A.allowNull;this.middle=Math.max(Math.min(this.max,0),this.min)};In2iGui.NumberValidator.prototype={validate:function(C){if(n2i.isBlank(C)&&this.allowNull){return{valid:true,value:null}}var A=parseFloat(C);if(isNaN(A)){return{valid:false,value:this.middle}}else{if(A<this.min){return{valid:false,value:this.min}}else{if(A>this.max){return{valid:false,value:this.max}}}}return{valid:true,value:A}}};In2iGui.fadeIn=function(A,C){if(n2i.getStyle(A,"display")=="none"){n2i.setStyle(A,{opacity:0,display:""})}n2i.animate(A,"opacity",1,C)};In2iGui.fadeOut=function(A,C){hui.animate(A,"opacity",0,C,{hideOnComplete:true})};In2iGui.bounceIn=function(A,C){if(n2i.browser.msie){n2i.setStyle(A,{"display":"block",visibility:"visible"})}else{n2i.setStyle(A,{"display":"block","opacity":0,visibility:"visible"});n2i.animate(A,"transform","scale(0.1)",0);window.setTimeout(function(){n2i.animate(A,"opacity",1,300);n2i.animate(A,"transform","scale(1)",400,{ease:n2i.ease.backOut})})}};In2iGui.positionAtElement=function(D,H,C){C=C||{};D=n2i.get(D);H=n2i.get(H);var E=n2i.getStyle(D,"display");if(E=="none"){n2i.setStyle(D,{"visibility":"hidden","display":"block"})}var I=left=n2i.getLeft(H),F=n2i.getTop(H);var A=C.vertical||null;if(C.horizontal&&C.horizontal=="right"){left=left+H.clientWidth-D.clientWidth}if(A=="topOutside"){F=F-D.clientHeight}else{if(A=="bottomOutside"){F=F+H.clientHeight}}left+=(C.left||0);F+=(C.top||0);n2i.setStyle(D,{"left":left+"px","top":F+"px"});if(E=="none"){n2i.setStyle(D,{"visibility":"visible","display":"none"})}};In2iGui.getTextAreaHeight=function(A){var D=this.textAreaDummy;if(!D){var D=this.textAreaDummy=document.createElement("div");D.className="in2igui_textarea_dummy";document.body.appendChild(D)}var C=A.value;if(C[C.length-1]==="\n"){C+="x"}C=n2i.escape(C).replace(/\n/g,"<br/>");D.innerHTML=C;D.style.width=(A.clientWidth)+"px";return D.clientHeight};In2iGui.extend=function(D,A){if(!D.name){In2iGui.latestObjectIndex++;D.name="unnamed"+In2iGui.latestObjectIndex}if(A!==undefined){if(D.options){D.options=n2i.override(D.options,A)}D.element=n2i.get(A.element);D.name=A.name}var C=In2iGui.get();C.objects[D.name]=D;D.delegates=[];D.listen=function(E){n2i.addToArray(this.delegates,E);return this};D.removeDelegate=function(E){n2i.removeFromArray(this.delegates,E)};D.clearDelegates=function(){this.delegates=[]};D.fire=function(H,F,E){In2iGui.callDelegates(this,H,F,E)};D.fireProperty=function(E,F){In2iGui.firePropertyChange(this,E,F)};if(!D.getElement){D.getElement=function(){return this.element}}if(!D.valueForProperty){D.valueForProperty=function(E){return this[E]}}if(D["$$layout"]){C.layoutWidgets.push(D)}};In2iGui.callDelegatesDrop=function(C,F){var D=In2iGui.get();var A=null;for(var E=0;E<D.delegates.length;E++){if(D.delegates[E]["$drop$"+C.kind+"$"+F.kind]){D.delegates[E]["$drop$"+C.kind+"$"+F.kind](C,F)}}};In2iGui.callAncestors=function(E,H,D,C){if(typeof (D)=="undefined"){D=E}var F=In2iGui.get().getAncestors(E);for(var A=0;A<F.length;A++){if(F[A][H]){F[A][H](D,C)}}};In2iGui.callDescendants=function(E,H,D,C){if(typeof (D)=="undefined"){D=E}if(!H[0]=="$"){H="$"+H}var F=In2iGui.get().getDescendants(E);for(var A=0;A<F.length;A++){if(F[A][H]){thisResult=F[A][H](D,C)}}};In2iGui.callVisible=function(A){In2iGui.callDescendants(A,"$visibilityChanged")};In2iGui.listen=function(A){In2iGui.get().listen(A)};In2iGui.callDelegates=function(F,A,J,C){if(typeof (J)=="undefined"){J=F}var K=null;if(F.delegates){for(var H=0;H<F.delegates.length;H++){var I=F.delegates[H];var D=null;if(F.name&&I["$"+A+"$"+F.name]){D=I["$"+A+"$"+F.name](J,C)}else{if(I["$"+A]){D=I["$"+A](J,C)}}if(K==null&&D!=null&&typeof (D)!="undefined"){K=D}}}var E=In2iGui.callSuperDelegates(F,A,J,C);if(K==null&&E!=null){K=E}return K};In2iGui.callSuperDelegates=function(F,A,J,C){if(typeof (J)=="undefined"){J=F}var D=In2iGui.get();var K=null;for(var H=0;H<D.delegates.length;H++){var I=D.delegates[H];var E=null;if(F.name&&I["$"+A+"$"+F.name]){E=I["$"+A+"$"+F.name](J,C)}else{if(I["$"+A]){E=I["$"+A](J,C)}}if(K==null&&E!=null&&typeof (E)!="undefined"){K=E}}return K};In2iGui.resolveImageUrl=function(I,D,H,A){for(var E=0;E<I.delegates.length;E++){if(I.delegates[E].$resolveImageUrl){return I.delegates[E].$resolveImageUrl(D,H,A)}}var C=In2iGui.get();for(var E=0;E<C.delegates.length;E++){var F=C.delegates[E];if(F.$resolveImageUrl){return F.$resolveImageUrl(D,H,A)}}return null};In2iGui.firePropertyChange=function(D,A,C){In2iGui.callDelegates(D,"propertyChanged",{property:A,value:C})};In2iGui.bind=function(F,A){if(F.charAt(0)=="@"){var E=F.substring(1).split(".");var D=In2iGui.get(E[0]);if(!D){n2i.log("Unable to bind to "+F);return }var C=E.slice(1).join(".");D.listen({$propertyChanged:function(H){if(H.property==C){A(H.value)}}});return D.valueForProperty(C)}return F};In2iGui.request=function(A){A=n2i.override({method:"post",parameters:{}},A);if(A.json){for(key in A.json){A.parameters[key]=n2i.toJSON(A.json[key])}}var D=A.onSuccess;A.onSuccess=function(F){if(typeof (D)=="string"){if(!n2i.request.isXMLResponse(F)){var H=F.responseText.replace(/^\s+|\s+$/g,"");if(H.length>0){var E=n2i.fromJSON(F.responseText)}else{E=""}In2iGui.callDelegates(E,"success$"+D)}else{In2iGui.callDelegates(F,"success$"+D)}}else{if(n2i.request.isXMLResponse(F)&&A.onXML){A.onXML(F.responseXML)}else{if(A.onJSON){var H=F.responseText.replace(/^\s+|\s+$/g,"");if(H.length>0){var E=n2i.fromJSON(F.responseText)}else{var E=null}A.onJSON(E)}else{if(typeof (D)=="function"){D(F)}else{if(A.onText){A.onText(F.responseText)}}}}}};var C=A.onFailure;A.onFailure=function(E){if(typeof (C)=="string"){In2iGui.callDelegates(E,"failure$"+C)}else{if(typeof (C)=="function"){C(E)}}};A.onException=function(E,F){n2i.log(F)};n2i.request(A)};In2iGui.parseItems=function(D){var A=D.documentElement;var C=[];In2iGui.parseSubItems(A,C);return C};In2iGui.parseSubItems=function(E,H){var C=E.childNodes;for(var A=0;A<C.length;A++){var F=C[A];if(F.nodeType==1&&F.nodeName=="title"){H.push({title:F.getAttribute("title"),type:"title"})}else{if(F.nodeType==1&&F.nodeName=="item"){var D=[];In2iGui.parseSubItems(F,D);H.push({title:F.getAttribute("title"),value:F.getAttribute("value"),icon:F.getAttribute("icon"),kind:F.getAttribute("kind"),badge:F.getAttribute("badge"),children:D})}}}};In2iGui.Bundle=function(A){this.strings=A};In2iGui.Bundle.prototype={get:function(C){var A=this.strings[C];if(A){return A[In2iGui.language]}n2i.log(C+" not found for language:"+In2iGui.language);return C}};In2iGui.ImageViewer=function(A){this.options=n2i.override({maxWidth:800,maxHeight:600,perimeter:100,sizeSnap:100,margin:0,ease:n2i.ease.slowFastSlow,easeEnd:n2i.ease.bounce,easeAuto:n2i.ease.slowFastSlow,easeReturn:n2i.ease.cubicInOut,transition:400,transitionEnd:1000,transitionReturn:300},A);this.element=n2i.get(A.element);this.box=this.options.box;this.viewer=n2i.firstByClass(this.element,"in2igui_imageviewer_viewer");this.innerViewer=n2i.firstByClass(this.element,"in2igui_imageviewer_inner_viewer");this.status=n2i.firstByClass(this.element,"in2igui_imageviewer_status");this.previousControl=n2i.firstByClass(this.element,"in2igui_imageviewer_previous");this.controller=n2i.firstByClass(this.element,"in2igui_imageviewer_controller");this.nextControl=n2i.firstByClass(this.element,"in2igui_imageviewer_next");this.playControl=n2i.firstByClass(this.element,"in2igui_imageviewer_play");this.closeControl=n2i.firstByClass(this.element,"in2igui_imageviewer_close");this.text=n2i.firstByClass(this.element,"in2igui_imageviewer_text");this.dirty=false;this.width=600;this.height=460;this.index=0;this.playing=false;this.name=A.name;this.images=[];this.box.listen(this);this.addBehavior();In2iGui.extend(this)};In2iGui.ImageViewer.create=function(A){A=A||{};var C=A.element=n2i.build("div",{"class":"in2igui_imageviewer",html:'<div class="in2igui_imageviewer_viewer"><div class="in2igui_imageviewer_inner_viewer"></div></div><div class="in2igui_imageviewer_text"></div><div class="in2igui_imageviewer_status"></div><div class="in2igui_imageviewer_controller"><div><div><a class="in2igui_imageviewer_previous"></a><a class="in2igui_imageviewer_play"></a><a class="in2igui_imageviewer_next"></a><a class="in2igui_imageviewer_close"></a></div></div></div>'});var D=In2iGui.Box.create({absolute:true,modal:true,closable:true});D.add(C);D.addToDocument();A.box=D;return new In2iGui.ImageViewer(A)};In2iGui.ImageViewer.prototype={addBehavior:function(){var A=this;this.nextControl.onclick=function(){A.next(true)};this.previousControl.onclick=function(){A.previous(true)};this.playControl.onclick=function(){A.playOrPause()};this.closeControl.onclick=this.hide.bind(this);n2i.listen(this.viewer,"click",this.zoom.bind(this));this.timer=function(){A.next(false)};this.keyListener=function(C){C=n2i.event(C);if(C.rightKey){A.next(true)}else{if(C.leftKey){A.previous(true)}else{if(C.escapeKey){A.hide()}else{if(C.returnKey){A.playOrPause()}}}}},n2i.listen(this.viewer,"mousemove",this.mouseMoveEvent.bind(this));n2i.listen(this.controller,"mouseenter",function(){A.overController=true});n2i.listen(this.controller,"mouseleave",function(){A.overController=false});n2i.listen(this.viewer,"mouseout",function(C){if(!In2iGui.isWithin(C,this.viewer)){A.hideController()}}.bind(this))},mouseMoveEvent:function(){window.clearTimeout(this.ctrlHider);if(this.shouldShowController()){this.ctrlHider=window.setTimeout(this.hideController.bind(this),2000);if(n2i.browser.msie){this.controller.show()}else{In2iGui.fadeIn(this.controller,200)}}},hideController:function(){if(!this.overController){if(n2i.browser.msie){this.controller.hide()}else{In2iGui.fadeOut(this.controller,500)}}},zoom:function(E){var A=this.images[this.index];if(A.width<=this.width&&A.height<=this.height){return }if(!this.zoomer){this.zoomer=n2i.build("div",{"class":"in2igui_imageviewer_zoomer",style:"width:"+this.viewer.clientWidth+"px;height:"+this.viewer.clientHeight+"px"});this.element.insertBefore(this.zoomer,n2i.firstByTag(this.element,"*"));n2i.listen(this.zoomer,"mousemove",this.zoomMove.bind(this));n2i.listen(this.zoomer,"click",function(){this.style.display="none"})}this.pause();var D=this.getLargestSize({width:2000,height:2000},A);var C=In2iGui.resolveImageUrl(this,A,D.width,D.height);this.zoomer.innerHTML='<div style="width:'+D.width+"px;height:"+D.height+'px;"><img src="'+C+'"/></div>';this.zoomer.style.display="block";this.zoomInfo={width:D.width,height:D.height};this.zoomMove(E)},zoomMove:function(C){C=new n2i.Event(C);if(!this.zoomInfo){return }var D={left:n2i.getLeft(this.zoomer),top:n2i.getTop(this.zoomer)};var A=(C.left()-D.left)/this.zoomer.clientWidth*(this.zoomInfo.width-this.zoomer.clientWidth);var E=(C.top()-D.top)/this.zoomer.clientHeight*(this.zoomInfo.height-this.zoomer.clientHeight);this.zoomer.scrollLeft=A;this.zoomer.scrollTop=E},getLargestSize:function(A,C){if(C.width<=A.width&&C.height<=A.height){return{width:C.width,height:C.height}}else{if(A.width/A.height>C.width/C.height){return{width:Math.round(A.height/C.height*C.width),height:A.height}}else{if(A.width/A.height<C.width/C.height){return{width:A.width,height:Math.round(A.width/C.width*C.height)}}else{return{width:A.width,height:A.height}}}}},calculateSize:function(){var A=this.options.sizeSnap;var H=n2i.getViewPortWidth()-this.options.perimeter;H=Math.floor(H/A)*A;H=Math.min(H,this.options.maxWidth);var C=n2i.getViewPortHeight()-this.options.perimeter;C=Math.floor(C/A)*A;C=Math.min(C,this.options.maxHeight);var F=0;var E=0;for(var D=0;D<this.images.length;D++){var I=this.getLargestSize({width:H,height:C},this.images[D]);F=Math.max(F,I.width);E=Math.max(E,I.height)}C=Math.floor(Math.min(C,E));H=Math.floor(Math.min(H,F));if(H!=this.width||C!=this.height){this.width=H;this.height=C;this.dirty=true}},adjustSize:function(){},showById:function(C){for(var A=0;A<this.images.length;A++){if(this.images[A].id==C){this.show(A);break}}},show:function(A){this.index=A||0;this.calculateSize();this.updateUI();var C=this.options.margin;n2i.setStyle(this.element,{width:(this.width+C)+"px",height:(this.height+C*2-1)+"px"});n2i.setStyle(this.viewer,{width:(this.width+C)+"px",height:(this.height-1)+"px"});n2i.setStyle(this.innerViewer,{width:((this.width+C)*this.images.length)+"px",height:(this.height-1)+"px"});n2i.setStyle(this.controller,{marginLeft:((this.width-180)/2+C*0.5)+"px",display:"none"});this.box.show();this.goToImage(false,0,false);n2i.listen(document,"keydown",this.keyListener)},hide:function(A){this.pause();this.box.hide();n2i.unListen(document,"keydown",this.keyListener)},$boxCurtainWasClicked:function(){this.hide()},$boxWasClosed:function(){this.hide()},updateUI:function(){if(this.dirty){this.innerViewer.innerHTML="";for(var C=0;C<this.images.length;C++){var A=n2i.build("div",{"class":"in2igui_imageviewer_image"});n2i.setStyle(A,{"width":(this.width+this.options.margin)+"px","height":(this.height-1)+"px"});this.innerViewer.appendChild(A)}if(this.shouldShowController()){this.controller.style.display="block"}else{this.controller.style.display="none"}this.dirty=false;this.preload()}},shouldShowController:function(){return this.images.length>1},goToImage:function(D,E,C){if(D){if(E>1){n2i.ani(this.viewer,"scrollLeft",this.index*(this.width+this.options.margin),Math.min(E*this.options.transitionReturn,2000),{ease:this.options.easeReturn})}else{var A=this.index==0||this.index==this.images.length-1;var H=(A?this.options.easeEnd:this.options.ease);if(!C){H=this.options.easeAuto}n2i.ani(this.viewer,"scrollLeft",this.index*(this.width+this.options.margin),(A?this.options.transitionEnd:this.options.transition),{ease:H})}}else{this.viewer.scrollLeft=this.index*(this.width+this.options.margin)}var F=this.images[this.index].text;if(F){this.text.innerHTML=F;this.text.style.display="block"}else{this.text.innerHTML="";this.text.style.display="none"}},clearImages:function(){this.images=[];this.dirty=true},addImages:function(A){for(var C=0;C<A.length;C++){this.addImage(A[C])}},addImage:function(A){this.images.push(A);this.dirty=true},play:function(){if(!this.interval){this.interval=window.setInterval(this.timer,6000)}this.next(false);this.playing=true;this.playControl.className="in2igui_imageviewer_pause"},pause:function(){window.clearInterval(this.interval);this.interval=null;this.playControl.className="in2igui_imageviewer_play";this.playing=false},playOrPause:function(){if(this.playing){this.pause()}else{this.play()}},resetPlay:function(){if(this.playing){window.clearInterval(this.interval);this.interval=window.setInterval(this.timer,6000)}},previous:function(A){var C=1;this.index--;if(this.index<0){this.index=this.images.length-1;C=this.images.length-1}this.goToImage(true,C,A);this.resetPlay()},next:function(A){var C=1;this.index++;if(this.index==this.images.length){this.index=0;C=this.images.length-1}this.goToImage(true,C,A);this.resetPlay()},preload:function(){var C=new n2i.Preloader();C.addImages(In2iGui.context+"In2iGui/gfx/imageviewer_controls.png");var A=this;C.setDelegate({allImagesDidLoad:function(){A.preloadImages()}});C.load()},preloadImages:function(){var A=new n2i.Preloader();A.setDelegate(this);for(var D=0;D<this.images.length;D++){var C=In2iGui.resolveImageUrl(this,this.images[D],this.width,this.height);if(C!==null){A.addImages(C)}}this.status.innerHTML="0%";this.status.style.display="";A.load(this.index)},allImagesDidLoad:function(){this.status.style.display="none"},imageDidLoad:function(D,E,C){this.status.innerHTML=Math.round(D/E*100)+"%";var A=In2iGui.resolveImageUrl(this,this.images[C],this.width,this.height);A=A.replace(/&amp;/g,"&");this.innerViewer.childNodes[C].style.backgroundImage="url('"+A+"')";n2i.setClass(this.innerViewer.childNodes[C],"in2igui_imageviewer_image_abort",false);n2i.setClass(this.innerViewer.childNodes[C],"in2igui_imageviewer_image_error",false)},imageDidGiveError:function(C,D,A){n2i.setClass(this.innerViewer.childNodes[A],"in2igui_imageviewer_image_error",true)},imageDidAbort:function(C,D,A){n2i.setClass(this.innerViewer.childNodes[A],"in2igui_imageviewer_image_abort",true)}};In2iGui.Box=function(A){this.options=n2i.override({},A);this.name=A.name;this.element=n2i.get(A.element);this.body=n2i.firstByClass(this.element,"in2igui_box_body");this.close=n2i.firstByClass(this.element,"in2igui_box_close");if(this.close){n2i.listen(this.close,"click",function(C){n2i.stop(C);this.hide();this.fire("boxWasClosed")}.bind(this))}In2iGui.extend(this)};In2iGui.Box.create=function(A){A=A||{};A.element=n2i.build("div",{"class":A.absolute?"in2igui_box in2igui_box_absolute":"in2igui_box",html:(A.closable?'<a class="in2igui_box_close" href="#"></a>':"")+'<div class="in2igui_box_top"><div><div></div></div></div><div class="in2igui_box_middle"><div class="in2igui_box_middle">'+(A.title?'<div class="in2igui_box_header"><strong class="in2igui_box_title">'+n2i.escape(A.title)+"</strong></div>":"")+'<div class="in2igui_box_body"'+(A.padding?' style="padding: '+A.padding+'px;"':"")+'></div></div></div><div class="in2igui_box_bottom"><div><div></div></div></div>',style:A.width?A.width+"px":null});return new In2iGui.Box(A)};In2iGui.Box.prototype={addToDocument:function(){document.body.appendChild(this.element)},add:function(A){if(A.getElement){this.body.appendChild(A.getElement())}else{this.body.appendChild(A)}},show:function(){var E=this.element;if(this.options.modal){var C=In2iGui.nextPanelIndex();E.style.zIndex=C+1;In2iGui.showCurtain({widget:this,zIndex:C})}if(this.options.absolute){n2i.setStyle(E,{display:"block",visibility:"hidden"});var A=E.clientWidth;var D=(n2i.getViewPortHeight()-E.clientHeight)/2+n2i.getScrollTop();n2i.setStyle(E,{"marginLeft":(A/-2)+"px",top:D+"px"});n2i.setStyle(E,{display:"block",visibility:"visible"})}else{E.style.display="block"}In2iGui.callVisible(this)},hide:function(){In2iGui.hideCurtain(this);this.element.style.display="none"},curtainWasClicked:function(){this.fire("boxCurtainWasClicked")}};In2iGui.SearchField=function(A){this.options=n2i.override({expandedWidth:null},A);this.element=n2i.get(A.element);this.name=A.name;this.field=n2i.firstByTag(this.element,"input");this.value=this.field.value;this.adaptive=n2i.hasClass(this.element,"in2igui_searchfield_adaptive");In2iGui.onDomReady(function(){this.initialWidth=parseInt(n2i.getStyle(this.element,"width"))}.bind(this));In2iGui.extend(this);this.addBehavior();this.updateClass()};In2iGui.SearchField.create=function(A){A=A||{};A.element=n2i.build("span",{"class":A.adaptive?"in2igui_searchfield in2igui_searchfield_adaptive":"in2igui_searchfield",html:'<em class="in2igui_searchfield_placeholder"></em><a href="javascript:void(0);" class="in2igui_searchfield_reset"></a><span><span><input type="text"/></span></span>'});return new In2iGui.SearchField(A)};In2iGui.SearchField.prototype={addBehavior:function(){var C=this;n2i.listen(this.field,"keyup",this.onKeyUp.bind(this));var D=n2i.firstByTag(this.element,"a");D.tabIndex=-1;var A=function(){C.field.focus();C.field.select()};n2i.listen(this.element,"mousedown",A);n2i.listen(this.element,"mouseup",A);n2i.listen(D,"mousedown",function(E){n2i.stop(E);C.reset();A()});n2i.listen(n2i.firstByTag(this.element,"em"),"mousedown",A);n2i.listen(this.field,"focus",function(){C.focused=true;C.updateClass()});n2i.listen(this.field,"blur",function(){C.focused=false;C.updateClass()});if(this.options.expandedWidth>0){this.field.onfocus=function(){n2i.ani(C.element,"width",C.options.expandedWidth+"px",500,{ease:n2i.ease.slowFastSlow})};this.field.onblur=function(){n2i.ani(C.element,"width",C.initialWidth+"px",500,{ease:n2i.ease.slowFastSlow,delay:100})}}},onKeyUp:function(A){this.fieldChanged();if(A.keyCode===Event.KEY_RETURN){this.fire("submit")}},setValue:function(A){this.field.value=A===undefined||A===null?"":A;this.fieldChanged()},getValue:function(){return this.field.value},isEmpty:function(){return this.field.value==""},isBlank:function(){return this.field.value.strip()==""},reset:function(){this.field.value="";this.fieldChanged()},updateClass:function(){var A="in2igui_searchfield";if(this.adaptive){A+=" in2igui_searchfield_adaptive"}if(this.focused&&this.value!=""){A+=" in2igui_searchfield_focus_dirty"}else{if(this.focused){A+=" in2igui_searchfield_focus"}else{if(this.value!=""){A+=" in2igui_searchfield_dirty"}}}this.element.className=A},fieldChanged:function(){if(this.field.value!=this.value){this.value=this.field.value;this.updateClass();this.fire("valueChanged",this.value);In2iGui.firePropertyChange(this,"value",this.value)}}}